<html lang="en" translate="no" style="--color-primary-1:#dbf5ec; --color-text-primary-1:black; --color-primary-2:#b6ebd9; --color-text-primary-2:black; --color-primary-3:#92e2c7; --color-text-primary-3:black; --color-primary-4:#6dd8b4; --color-text-primary-4:black; --color-primary-5:#49cea1; --color-text-primary-5:black; --color-primary-6:#24c48e; --color-text-primary-6:black; --color-primary-7:#1d9d72; --color-text-primary-7:white; --color-primary-8:#167655; --color-text-primary-8:white; --color-primary-9:#0e4e39; --color-text-primary-9:white; --color-primary-10:#07271c; --color-text-primary-10:white; --color-primary-4-30:rgba(109, 216, 180, 0.3); --color-primary-5-05:rgba(73, 206, 161, 0.05); --color-primary-5-01:rgba(73, 206, 161, 0.1); --color-primary-5-25:rgba(73, 206, 161, 0.25); --color-primary-5-30:rgba(73, 206, 161, 0.3); --color-primary:#24c48e; --color-primary-06:#24c48e; --color-primary-6-30:rgba(36, 196, 142, 0.3); --color-primary-6-01:rgba(36, 196, 142, 0.1); --color-primary-01:#24c48e1a; --color-primary-02:#24c48e33; --color-primary-05:#24c48e0d; --color-primary-25:#24c48e40; --color-primary-30:#24c48e4d; --color-text-primary:black; --color-brand-primary-1:#dbf5ec; --color-text-brand-primary-1:#000000; --color-brand-primary-2:#b6ebd9; --color-text-brand-primary-2:#000000; --color-brand-primary-3:#92e2c7; --color-text-brand-primary-3:#000000; --color-brand-primary-4:#6dd8b4; --color-text-brand-primary-4:#000000; --color-brand-primary-5:#49cea1; --color-text-brand-primary-5:#000000; --color-brand-primary-6:#24c48e; --color-text-brand-primary-6:#000000; --color-brand-primary-7:#1d9d72; --color-text-brand-primary-7:#ffffff; --color-brand-primary-8:#167655; --color-text-brand-primary-8:#ffffff; --color-brand-primary-9:#0e4e39; --color-text-brand-primary-9:#ffffff; --color-brand-primary-10:#07271c; --color-text-brand-primary-10:#ffffff; --color-brand-primary:#24c48e; --color-text-brand-primary:black; --color-text-positive:black; --color-text-positive-1:black; --color-text-positive-2:black; --color-text-positive-3:black; --color-text-positive-4:black; --color-text-positive-5:black; --color-text-positive-6:black; --color-text-positive-7:black; --color-text-positive-8:white; --color-text-positive-9:white; --color-text-positive-10:white; --color-text-warning:black; --color-text-warning-1:black; --color-text-warning-2:black; --color-text-warning-3:black; --color-text-warning-4:black; --color-text-warning-5:black; --color-text-warning-6:black; --color-text-warning-7:white; --color-text-warning-8:white; --color-text-warning-9:white; --color-text-warning-10:white; --color-text-critical:white; --color-text-critical-1:black; --color-text-critical-2:black; --color-text-critical-3:black; --color-text-critical-4:black; --color-text-critical-5:white; --color-text-critical-6:white; --color-text-critical-7:white; --color-text-critical-8:white; --color-text-critical-9:white; --color-text-critical-10:white; --color-text-secondary:white; --color-positive-1:#eaf8e3; --color-positive-2:#d5f1c7; --color-positive-3:#c0eaab; --color-positive-4:#aae28e; --color-positive-5:#95db72; --color-positive-6:#80d456; --color-positive-7:#66aa45; --color-positive-8:#4d7f34; --color-positive-9:#335522; --color-positive-10:#1a2a11; --color-positive:#80d456; --color-positive-01:rgba(128, 212, 86, 0.1); --color-positive-25:rgba(128, 212, 86, 0.25); --color-positive-75:rgba(128, 212, 86, 0.75); --color-warning-1:#fce9da; --color-warning-2:#f8d3b5; --color-warning-3:#f5bd90; --color-warning-4:#f2a66b; --color-warning-5:#ee9046; --color-warning-6:#eb7a21; --color-warning-7:#bc621a; --color-warning-8:#8d4914; --color-warning-9:#5e310d; --color-warning-10:#2f1807; --color-warning:#eb7a21; --color-warning-25:rgba(235, 122, 33, 0.25); --color-warning-01:rgba(235, 122, 33, 0.1); --color-critical-1:#fbdadc; --color-critical-2:#f7b5b8; --color-critical-3:#f49095; --color-critical-4:#f06a72; --color-critical-5:#ec454e; --color-critical-6:#e8202b; --color-critical-7:#ba1a22; --color-critical-8:#8b131a; --color-critical-9:#5d0d11; --color-critical-10:#2e0609; --color-critical:#e8202b; --color-critical-25:rgba(232, 32, 43, 0.25); --color-critical-01:rgba(232, 32, 43, 0.1); --color-critical-12:rgba(232, 32, 43, 0.12); --color-critical-05:rgba(232, 32, 43, 0.04); --color-critical-15:rgba(232, 32, 43, 0.15); --color-link-1:#e9edfa; --color-text-link-1:black; --color-link-2:#d3dbf4; --color-text-link-2:black; --color-link-3:#bdc9ef; --color-text-link-3:black; --color-link-4:#a6b6ea; --color-text-link-4:black; --color-link-5:#90a4e4; --color-text-link-5:black; --color-link-6:#7a92df; --color-text-link-6:white; --color-link-7:#6275b2; --color-text-link-7:white; --color-link-8:#495886; --color-text-link-8:white; --color-link-9:#313a59; --color-text-link-9:white; --color-link-10:#181d2d; --color-text-link-10:white; --color-link:#7a92df; --border-radius:3.84px; --color-bg:#ffffff; --color-bg-secondary:#ffffff; --color-black:#03030a; --color-white-10:#ffffff0a; --color-black-10:#03030a; --color-neutral-solid-10:#03030a; --color-white-9:#ffffff0f; --color-black-09:#03030ad9; --color-neutral-solid-9:#29292f; --color-white-8:#ffffff1a; --color-black-08:#03030aa6; --color-neutral-solid-8:#5b5b60; --color-white-7:#ffffff26; --color-black-07:#03030a73; --color-neutral-solid-7:#8e8e91; --color-white-6:#ffffff40; --color-black-06:#03030a40; --color-neutral-solid-6:#c0c0c2; --color-white-5:#ffffff59; --color-black-05:#03030a26; --color-neutral-solid-5:#d9d9da; --color-white-4:#ffffff73; --color-black-04:#03030a1a; --color-neutral-solid-4:#e6e6e7; --color-white-3:#ffffffa6; --color-black-03:#03030a0f; --color-neutral-solid-3:#f0f0f0; --color-white-2:#ffffffd9; --color-black-02:#03030a05; --color-neutral-solid-2:#fafafa; --color-white-1:#ffffff; --color-black-01:#03030a03; --color-neutral-solid-1:#fcfcfd;">

<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="icon" type="image/x-icon" href="{{ asset('imgs/green-house.png') }}">
    <title>
        @include('layouts.titles') @yield('title.dashboards.index')Green House 
    </title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link href="{{ asset('css/waiting_loading_page.css') }}" rel="stylesheet">

    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link href="{{ asset('css/spacing.css') }}" rel="stylesheet">
    <link href="{{ asset('css/switch.css') }}" rel="stylesheet">
    <link href="{{ asset('css/light-bootstrap-dashboard.css') }}" rel="stylesheet">
    <link href="{{ asset('css/deleteModal.css') }}" rel="stylesheet">
    <link href="{{ asset('css/plot/tab.css') }}" rel="stylesheet">
    <link href="{{ asset('css/sidenave.css') }}" rel="stylesheet">
    <link href="{{ asset('css/back-to-top.css') }}" rel="stylesheet">

    <script>
        function slider(x) {
            document.getElementById("mySidenav").classList.toggle("open");
            x.classList.toggle("change");
        }
        $(document).ready(function() {
            $('div.container').click(function() {
                $('#plotName').toggle(300);
            });
            $('#openHistoryPlant').click(function() {
                $('.historyPlant').show();
            });
            $('#closeHistoryPlant').click(function() {
                $('.historyPlant').hide();
            });

            $('#openSettingPlant').click(function() {
                $('.setting-plant').show();
            });
            $('#closeSettingPlant').click(function() {
                $('.setting-plant').hide();
            });

            $('#openDateShowTemps').click(function() {
                $('.dateShowTemps').show();
            });
            $('#cancelDateShowTemp').click(function() {
                $('.dateShowTemps').hide();
            });

            $('#openDateShowHumids').click(function() {
                $('.dateShowHumids').show();
            });
            $('#cancelDateShowHumid').click(function() {
                $('.dateShowHumids').hide();
            });
        });
    </script>

    <!-- CSS & JS Pie charts -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<link href="{{asset('assets/css/components.min.css')}}" rel="stylesheet" type="text/css">	
	<script type="text/javascript" src="{{asset('assets/js/jquery.min.js')}}"></script>
	<!-- <script type="text/javascript" src="{{asset('assets/js/bootstrap.bundle.min.js')}}"></script>	 -->
	<script type="text/javascript" src="{{asset('assets/js/echarts.min.js')}}"></script>	

    <script src="{{ asset('js/ajax.js') }}"></script>
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400&display=swap" rel="stylesheet">
    <link href="{{ asset('/css/731bfdf3d0cb0f734453.css') }}" rel="stylesheet">
    <link href="{{ asset('/css/ab3606d21984a57939eb.css') }}" rel="stylesheet">


    <style>
        body {
            font-family: 'Prompt', sans-serif;
        }

        .font-prompt {
            font-family: 'Prompt', sans-serif;
        }
    </style>
</head>

<body>
    <button id="back-to-top-btn"><i class="fas fa-angle-double-up text-center"></i></button>
    <div class="content">
        <div id="app">
            @if(Auth::check())
            <div class="main-plot" style="height: 100vh;">
            
                <div class="layout">
                    <div></div>
                    <div></div>
                    <div class="layout-wrapper">
                        <div class="user-layout">
                            <div class="user-layout-left-navigation-stack user-layout-left-navigation-stack-fold">
                                <div class="user-layout-left-navigation  user-layout-left-navigation-fold">
                                    <div class="user-layout-left-navigation-fold-company-logo" style="cursor: default;"><img src="/imgs/green-house.png" alt="Icon"></div>
                                    <ul class="ant-menu ant-menu-root ant-menu-vertical ant-menu-light user-layout-left-navigation-menu ant-menu-inline-collapsed">
                                        <li class="ant-menu-item ant-menu-item-selected" data-toggle="tooltip" data-placement="right" title="จัดการฟาร์ม"><span class="ant-menu-title-content"><a href="{{ route('plots.index') }}"></a><span class="linearicon linearicon-grid2 undefined"></span><span>ฟาร์ม</span></span></li>
                                        <!-- <li class="ant-menu-item" data-toggle="tooltip" data-placement="right" title="ตั้งค่า"><a href="{{ route('setting') }}"></a><span class="ant-menu-title-content"><span class="linearicon linearicon-cog undefined"></span><span>Settings</span></span></li> -->
                                        <li class="ant-menu-item" data-toggle="tooltip" data-placement="right" title="โปรไฟล์ผู้ใช้"><a href="{{ route('profile') }}"></a><span class="ant-menu-title-content"><span class="linearicon linearicon-user undefined"></span><span>User Profile</span></span></li>
                                        <script>
                                            $(document).ready(function() {
                                                $('[data-toggle="tooltip"]').tooltip();
                                            });
                                        </script>
                                    </ul>
                                    <div aria-hidden="true" style="display: none;">
                                        <div class="user-layout-left-navigation-organization"></div>
                                        <div class="user-layout__help-tooltip-wrapper"></div>
                                    </div>
                                </div>
                            </div>

                            @yield('content')

                            
                        </div>
                    </div>
                </div>
            </div>
            {{--
            <div class="side-mobile">
                <div id="mySidenav" class="sidenav">
                    <a href="{{ route('plots.index') }}" class="font-prompt">จัดการฟาร์ม</a>
                    <ul>
                        <li style="list-style-type: none;"><a href="javascript:void(0)" style="color: #49cea1;" class="font-prompt">แผงควบคุม</a></li>
                        <li style="list-style-type: none;"><a href="{{ route('savenote.index', $plotID) }}" class="font-prompt">จดบันทึก</a></li>
                        <li style="list-style-type: none;"><a href="{{ route('setting.index', $plotID) }}" class="font-prompt">ตั้งค่า</a></li>
                        <li style="list-style-type: none;"><a href="{{ route('qrcode.index', $plotID) }}" class="font-prompt">QR Code</a></li>
                    </ul>
                    <a href="{{ route('profile') }}" class="font-prompt">โปรไฟล์</a>
                    <a href="{{ route('logout.perform') }}" class="font-prompt">ออกจากระบบ</a>
                </div>

                <div id="main" style="position:relative;">
                    <div class="row">
                        <div class="col-6">
                            <span style="cursor:pointer;">
                                <div class="container" onclick="slider(this)" style="width:fit-content;">
                                    <div class="bar1-x"></div>
                                    <div class="bar2-x"></div>
                                    <div class="bar3-x"></div>
                                </div>
                            </span>
                        </div>
                        <div class="col-6">
                            <label class="font-prompt vertical-center"><strong id="plotName" style="font-size: x-large;font-weight:bolder;"> แปลง : {{$value_name_sub}}</strong></label>
                        </div>
                    </div>
                </div>
                <div class="row" style="margin: -0.5em 0 2em 0;">
                    <hr>
                    <div class="col-4">
                        <a href="javascript:void(0)" class="bt-green font-prompt btn-sm" style="font-size: medium;float:right;margin-top:-.4em;">
                            โดยรวม
                        </a>
                    </div>
                    <div class="col-3">
                        <a href="{{ route('dashboard.switch', $plotID) }}" class="bt-w-bg btn-sm font-prompt" style="color: #000; font-size: medium;">สวิตซ์</a>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <button  id="" class="bt-create-farm-record btn-sm" style="float:right;margin:-1em 1em 1em 0;">
                            <span style="font-size: medium;">เริ่มปลูกใหม่</span>
                        </button>
                    </div>
                </div>
                @if ($message = Session::get('success'))
                <div id="alert" class="alert alert-success">
                    <span class="font-prompt" style="font-size: medium;">{{ $message }}</span>
                </div>
                @endif
                @foreach($get_host_topic as $keyht => $valueht)
                <input id="input_host" type="hidden" value="{{$valueht->host}}">
                <input id="input_topic" type="hidden" value="{{$valueht->topic_send}}">
                @endforeach
                <div class="row">
                    <div class="col-1"></div>
                    <div class="col-10">
                        <div class="width-border ">
                            <h4 class="m-4 font-prompt">ค่าใช้จ่าย</h4>
                            <div class="row">
                                <div class="col-12">
                                    <div class="chart-container">
                                        <div class="chart has-fixed-height" id="pie_basic_mobile" style="margin-bottom: 1rem; margin-top: -5rem;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-1"></div>
                </div>
                <div class="row">
                    <div class="col-1"></div>
                    <div class="col-10">
                        <div class="width-border" style="font-size: medium;">
                            <div class="row">
                                <div class="ml-4 mt-4">
                                    <span>
                                        <li>ลงทุนไปแล้ว
                                            @if($check_tract_total_price == 0)
                                            0
                                            @else
                                            {{$tract_total_price}}
                                            @endif
                                            บาท
                                        </li>
                                    </span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="ml-4">
                                    <span>
                                        <li>คาดการณ์การเก็บเกี่ยววันที่</li>
                                    </span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="ml-4 mb-4">
                                    <span>
                                        <li>ขายได้ บาท</li>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-1"></div>
                </div>
                <div class="row">
                    <div class="col-1"></div>
                    <div class="col-10">
                        <div class="width-border">
                            <h4 class="m-4 font-prompt">อุณหภูมิ</h4>
                            <div class="row">
                                <div class="center">
                                    <img src="/imgs/temperature.png" width="20%" alt="icon">
                                </div>
                            </div>
                            <div class="row">
                                <div class="center">
                                    <h3 class="mt-2 font-prompt" id="temp_mobile">0.0 ํC</h3>
                                </div>
                            </div>
                            <span class="m-4 font-prompt" id="date-time-temp-mobile">อัพเดทล่าสุด : 00/00/0000 00:00:00</span>
                            <p style="padding: 1rem 1em;">&nbsp;</p>
                        </div>
                    </div>
                    <div class="col-1"></div>
                </div>
                <div class="row">
                    <div class="col-1"></div>
                    <div class="col-10">
                        <div class="width-border">
                            <h4 class="m-4 font-prompt">ความชื้นในอากาศ</h4>
                            <div class="row">
                                <div class="center">
                                    <img src="/imgs/wind.png" width="20%" alt="icon">
                                </div>
                            </div>
                            <div class="row">
                                <div class="center">
                                    <h3 class="mt-2 font-prompt" id="humid_mobile">0.0 %</h3>
                                </div>
                            </div>
                            <span class="m-4 font-prompt" id="date-time-humid-mobile">อัพเดทล่าสุด : 00/00/0000 00:00:00</span>
                            <p></p>
                        </div>
                    </div>
                    <div class="col-1"></div>
                </div>
                <p></p>
            </div>
            --}}
            <div class="historyPlant" style="display: none;">
                <div class="ant-modal-mask"></div>
                <div class="ant-modal-wrap ant-modal-centered">
                    <div class="ant-modal">
                        <div class="ant-modal-content">
                            <div class="ant-modal-header">
                                <div class="ant-modal-title" style="font-size:large;font-weight:bolder;">
                                <div class="row">
                                    <div class="col-sm-6">
                                        ประวัติการปลูกของคุณ
                                    </div>
                                    <div class="col-sm-6">
                                        <div class="bt-last">
                                            <!-- <button type="button" id="closeHistoryPlant" class="btn-secondary btn-sm">X</button> -->
                                            <a href="javascrip:void(0)" id="closeHistoryPlant">
                                                <img class="bt-edit-switch" src="/imgs/cancel-green.png" alt="icon" style="width: 1em;">
                                            </a>
                                        </div>
                                    </div>
                                </div>
                                </div>
                            </div>
                            <div class="ant-modal-body">
                                @php $i = 0; @endphp
                                @foreach($get_new_plant_dates as $key_new_plant_dates => $value_new_plant_dates)
                                <div class="ant-row ant-form-item ant-form-item-with-help own-custom-form-field normal-offset normal-offset ant-form-item-has-success" style="row-gap: 0px;">
                                    <div class="font-prompt">รอบที่ {{++$i}}
                                    <?php
                                    $new_plant_dates = thaidate('d-m-Y H:i:s', strtotime($value_new_plant_dates->delete_date));
                                    $total_pay = number_format($value_new_plant_dates->total_price);
                                    $total_sell = number_format($value_new_plant_dates->total_sale);
                                    ?>
                                        <a href="{{ route('dashboard.historyPlant',  ['plotID'=>$plotID, 'historyPlantID' => $value_new_plant_dates->id]) }}" target="_blank" class="ant-btn ml-2">{{ $new_plant_dates }}</a>
                                          
                                        <span>รายจ่าย {{ $total_pay }} บาท</span>
                                        
                                        <span>รายรับ {{ $total_sell }} บาท</span>
                                    </div>
                                </div>
                                @endforeach
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="setting-plant" style="display: none;">
                <form action="{{ route('dashboard.storeSettingPlant') }}" method="POST">
                    @csrf
                    <div class="ant-modal-mask"></div>
                    <div class="ant-modal-wrap ant-modal-centered">
                        <div class="ant-modal">
                            <div class="ant-modal-content">
                                <div class="ant-modal-header">
                                    <div class="ant-modal-title" style="font-size:large;font-weight:bolder;">ตั้งค่าการปลูก</div>
                                </div>
                                <div class="ant-modal-body" id="FarmInputRecordTypeAndSourceShow">
                                    <div class="ant-row ant-form-item ant-form-item-with-help own-custom-form-field normal-offset normal-offset ant-form-item-has-success" style="row-gap: 0px;">
                                        <div class="font-prompt">พืชที่ปลูก</div>
                                        <div class="ant-col ant-form-item-control">
                                            <div class="ant-form-item-control-input">
                                                <div class="ant-form-item-control-input-content"><input name="name" type="text" class="ant-input" required></div>
                                            </div>
                                            <div class="ant-form-item-explain ant-form-item-explain-success">
                                                <div role="alert" class="font-prompt">ใช้เฉพาะตัวอักษร, ยัติภังค์, จุด, และช่องว่าง</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="ant-row ant-form-item ant-form-item-with-help own-custom-form-field normal-offset normal-offset ant-form-item-has-success" style="row-gap: 0px;">
                                        <div class="font-prompt">ชื่อผู้ปลูก</div>
                                        <div class="ant-col ant-form-item-control">
                                            <div class="ant-form-item-control-input">
                                                <div class="ant-form-item-control-input-content"><input name="grower_name" type="text" class="ant-input" required></div>
                                            </div>
                                            <div class="ant-form-item-explain ant-form-item-explain-success">
                                                <div role="alert" class="font-prompt">ใช้เฉพาะตัวอักษร, ยัติภังค์, จุด, และช่องว่าง</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="ant-row ant-form-item ant-form-item-with-help own-custom-form-field normal-offset normal-offset ant-form-item-has-success" style="row-gap: 0px;">
                                        <div class="font-prompt">วันที่เริ่มปลูก</div>
                                        <div class="ant-col ant-form-item-control">
                                            <div class="ant-form-item-control-input">
                                                <input class="ant-input font-prompt" type="date" name="date_of_plant" id="datePicker_start_plant" required>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="ant-row ant-form-item ant-form-item-with-help own-custom-form-field normal-offset normal-offset ant-form-item-has-success" style="row-gap: 0px;">
                                        <div class="font-prompt">เก็บเกี่ยวผลผลิตในอีก <input name="harvest_day" type="number" class="ant-input" required style="width:20%;"> วัน</div>
                                    </div>
                                    <input type="hidden" name="plot_id" id="plot_id" value="{{$plotID}}">
                                </div>
                                <div class="ant-modal-footer">
                                    <button type="button" class="ant-btn ant-btn-secondary" id="closeSettingPlant" ant-click-animating-without-extra-node="false">
                                        <span>ยกเลิก</span>
                                    </button>
                                    <button type="submit" class="ant-btn ant-btn-primary">
                                        <span>ยืนยัน</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="dateShowTemps" style="display: none;">
                    <div class="ant-modal-mask"></div>
                    <div class="ant-modal-wrap ant-modal-centered">
                        <div class="ant-modal">
                            <div class="ant-modal-content">
                                <div class="ant-modal-header">
                                    <div class="ant-modal-title" style="font-size:large;font-weight:bolder;">เลือกดูประวัติอุณหภูมิ</div>
                                </div>
                                <div class="ant-modal-body" id="FarmInputRecordTypeAndSourceShow">
                                    <div class="ant-row ant-form-item ant-form-item-with-help own-custom-form-field normal-offset normal-offset ant-form-item-has-success" style="row-gap: 0px;">
                                        <div class="font-prompt">วันที่ต้องการดู</div>
                                        <div class="ant-col ant-form-item-control">
                                            <div class="ant-form-item-control-input">
                                                <input class="ant-input font-prompt" type="date" name="dateShowTemp" id="datePicker_show_temp" required>
                                            </div>
                                        </div>
                                    </div>
                                    <input type="hidden" name="plot_id" id="plot_id" value="{{$plotID}}">
                                </div>
                                <div class="ant-modal-footer">
                                    <button type="button" class="ant-btn ant-btn-secondary" id="cancelDateShowTemp" ant-click-animating-without-extra-node="false">
                                        <span>ยกเลิก</span>
                                    </button>
                                    <button onclick="dateShowTemp()" class="ant-btn ant-btn-primary">
                                        <span>ยืนยัน</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
            </div>
            <div class="dateShowHumids" style="display: none;">
                    <div class="ant-modal-mask"></div>
                    <div class="ant-modal-wrap ant-modal-centered">
                        <div class="ant-modal">
                            <div class="ant-modal-content">
                                <div class="ant-modal-header">
                                    <div class="ant-modal-title" style="font-size:large;font-weight:bolder;">เลือกดูประวัติความชื้น</div>
                                </div>
                                <div class="ant-modal-body" id="FarmInputRecordTypeAndSourceShow">
                                    <div class="ant-row ant-form-item ant-form-item-with-help own-custom-form-field normal-offset normal-offset ant-form-item-has-success" style="row-gap: 0px;">
                                        <div class="font-prompt">วันที่ต้องการดู</div>
                                        <div class="ant-col ant-form-item-control">
                                            <div class="ant-form-item-control-input">
                                                <input class="ant-input font-prompt" type="date" name="dateShowHumid" id="datePicker_show_humid" required>
                                            </div>
                                        </div>
                                    </div>
                                    <input type="hidden" name="plot_id" id="plot_id" value="{{$plotID}}">
                                </div>
                                <div class="ant-modal-footer">
                                    <button type="button" class="ant-btn ant-btn-secondary" id="cancelDateShowHumid" ant-click-animating-without-extra-node="false">
                                        <span>ยกเลิก</span>
                                    </button>
                                    <button onclick="dateShowHumid()" class="ant-btn ant-btn-primary">
                                        <span>ยืนยัน</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
            </div>

            @else
            
            @guest
            <div id="app">
                <div style="height: 100vh;">
                    <div class="layout">
                        <div></div>
                        <div></div>
                        <div class="login-scene">
                            <div class="login-logo-wrapper"><img class="login-logo" alt="LOGO" src="/imgs/green-house.png"></div>
                            <div class="login-form-wrapper">
                                <div class="alert alert-danger font-prompt" role="alert">
                                    กรุณา <a href="{{route('login') }}" class="font-prompt"><strong>เข้าสู่ระบบ</strong></a> ก่อนใช้งาน
                                </div>
                            </div>
                            <div class="login-bottom-label"></div>
                        </div>
                    </div>
                    <div class="privacy-policy"><a href="/dashboard/privacy-policy" target="_blank">Privacy Policy</a></div>
                </div>
            </div>
            @endguest

            @endif
        </div>
    </div>
    <div class="loader-wrapper">
        <div class="loader"></div>
        <img class="greenhouse-loader" src="{{ asset('imgs/green-house.png') }}" width="100px" alt="Logo">
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.2/axios.min.js"></script>
    <!-- <script src="https://requirejs.org/docs/release/2.3.6/r.js"></script> -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.js" type="text/javascript"></script>
    
    <script src="https://kit.fontawesome.com/a54d2cbf95.js"></script>
    <script src="{{ asset('js/back-to-top.js') }}"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <script>
        var cl = console.log.bind(document);
        var host = document.getElementById("input_host").value
        var port = 1883;
        var x = Math.floor(Math.random() * 10000);
        var cname = "controlform-" + x;
        client = mqtt = new Paho.MQTT.Client(host, port, cname);
        client.onConnectionLost = onConnectionLost;
        client.onMessageArrived = onMessageArrived;

        client.connect({
            onSuccess: onConnect
        });

        function onConnect() {
            message = new Paho.MQTT.Message("0");
            message.destinationName = document.getElementById("input_topic").value
            client.subscribe(message.destinationName);
            client.send(message) // publish message
        }

        function onConnectionLost(responseObject) {
            if (responseObject.errorCode !== 0) {
                console.log("onConnectionLost:" + responseObject.errorMessage);
            }
        }

        function onMessageArrived(message) {
            sessionStorage.setItem("msg", message.payloadString);
            msg = sessionStorage.getItem("msg");
            obj = eval("(function(){return " + msg + ";})()");

            document.getElementById("temp").innerHTML = obj.temp + " 'C";
            // document.getElementById("temp_mobile").innerHTML = obj.temp + " 'C";
            document.getElementById("humid").innerHTML = obj.humid + " %";
            // document.getElementById("humid_mobile").innerHTML = obj.humid + " %";
            
            if(obj.temp == undefined || obj.humid == undefined){
                document.getElementById("temp").innerHTML = 'รอโหลด';
                // document.getElementById("temp_mobile").innerHTML = 'รอโหลด';
                document.getElementById("humid").innerHTML = 'รอโหลด';
                // document.getElementById("humid_mobile").innerHTML = 'รอโหลด';
            }
            // document.getElementById("mqtt-value").innerHTML = msg;
            // console.log(msg);
            const zeroFill = n => {
                return ('0' + n).slice(-2);
            }

            const interval = setInterval(() => {
                const now = new Date();
                const dateTime = now.toLocaleDateString() + ' ' + zeroFill(now.getHours()) + ':' + zeroFill(now.getMinutes()) + ':' + zeroFill(now.getSeconds());

                document.getElementById("date-time-humid").innerHTML = "อัพเดทล่าสุด : " + dateTime;
                // document.getElementById("date-time-humid-mobile").innerHTML = "อัพเดทล่าสุด : " + dateTime;
                document.getElementById('date-time-temp').innerHTML = "อัพเดทล่าสุด : " + dateTime;
                // document.getElementById('date-time-temp-mobile').innerHTML = "อัพเดทล่าสุด : " + dateTime;
            }, 1000);   

            // setTimeout(function(){
            //     var plot_id = document.getElementById('plot_id').value;
            //     var humid_val = obj.humid;
            //     var temp_val = obj.temp;
            //     const storeNow = new Date();
            //     const countSeconds = zeroFill(storeNow.getSeconds());
            //     const countMinutes = zeroFill(storeNow.getMinutes());
            //     if(true){
            //         $.ajax({
            //             type: 'GET',
            //             url: "{{ route('storeTemp') }}", 
            //             data: {
            //                 // 'switch_id': switchID,
            //                 'value': temp_val, plot_id,
            //             }
            //         });
            //         $.ajax({
            //             type: 'GET',
            //             url: "{{ route('storeHumid') }}", 
            //             data: {
            //                 // 'switch_id': switchID,
            //                 'value': humid_val, plot_id,
            //             }
            //         });
            //     }
            // }, 5000)
            
        }
        

        /////////////////// JS ECHART Pie chart ////////////////////////////////
        var pie_basic_element = document.getElementById('pie_basic');
        if (pie_basic_element) {
            var pie_basic = echarts.init(pie_basic_element);
            pie_basic.setOption({
                color: [
                    '#2ec7c9','#b6a2de','#5ab1ef','#ffb980','#d87a80',
                    '#8d98b3','#e5cf0d','#97b552','#95706d','#dc69aa',
                    '#07a2a4','#9a7fd1','#588dd5','#f5994e','#c05050',
                    '#59678c','#c9ab00','#7eb00a','#6f5553','#c14089'
                ],          
                
                textStyle: {
                    fontFamily: 'Prompt, sans-serif',
                    fontSize: 15
                },

                title: {
                    text: '',
                    left: 'center',
                    textStyle: {
                        fontSize: 17,
                        fontWeight: 500,
                    },
                    subtextStyle: {
                        fontSize: 12
                    }
                },

                tooltip: {
                    trigger: 'item',
                    backgroundColor: 'rgba(0,0,0,0.75)',
                    padding: [10, 15],
                    textStyle: {
                        fontSize: 13,
                        fontFamily: 'Roboto, sans-serif'
                    },
                    formatter: "{a} <br/>{b}: {c} บาท ({d}%)",
                },

                legend: {
                    orient: 'horizontal',
                    bottom: '80%',
                    left: 'center',                   
                    data: ['เตรียมพื้นที่ปลูก', 'เพาะปลูก', 'เก็บเกี่ยว', 'บำรุงรักษา'
                ],
                    itemHeight: 8,
                    itemWidth: 8
                },

                series: [{
                    name: 'ค่าใช้จ่าย',
                    type: 'pie',
                    radius: '40%',
                    // center: ['45%', '50%'],
                    itemStyle: {
                        normal: {
                            borderWidth: 1,
                            borderColor: '#fff',
                        }
                    },
                    data: [
                        {value: {{$plant_area_total_price}}, name: 'เตรียมพื้นที่ปลูก'},
                        {value: {{$plant_total_price}}, name: 'เพาะปลูก'},
                        {value: {{$harvest_total_price}}, name: 'เก็บเกี่ยว'},
                        {value: {{$maintenance_total_price}}, name: 'บำรุงรักษา'}
                    ]
                }]
            });
        }
        //////////////////////////////////////////////////////////////////////////
    </script>


    <!-- <script>
        var pie_basic_element = document.getElementById('pie_basic_mobile');
        if (pie_basic_element) {
            var pie_basic = echarts.init(pie_basic_element);
            pie_basic.setOption({
                color: [
                    '#2ec7c9','#b6a2de','#5ab1ef','#ffb980','#d87a80',
                    '#8d98b3','#e5cf0d','#97b552','#95706d','#dc69aa',
                    '#07a2a4','#9a7fd1','#588dd5','#f5994e','#c05050',
                    '#59678c','#c9ab00','#7eb00a','#6f5553','#c14089'
                ],          
                
                textStyle: {
                    fontFamily: 'Prompt, sans-serif',
                    fontSize: 15
                },

                title: {
                    text: '',
                    left: 'center',
                    textStyle: {
                        fontSize: 17,
                        fontWeight: 500,
                    },
                    subtextStyle: {
                        fontSize: 12
                    }
                },

                tooltip: {
                    trigger: 'item',
                    backgroundColor: 'rgba(0,0,0,0.75)',
                    padding: [10, 15],
                    textStyle: {
                        fontSize: 13,
                        fontFamily: 'Roboto, sans-serif'
                    },
                    formatter: "{a} <br/>{b}: {c} บาท ({d}%)"
                },

                legend: {
                    orient: 'horizontal',
                    bottom: '0%',
                    left: 'center',                   
                    data: ['เมล็ด', 
                    'ปุ๋ย',
                    'ค่าแรง',
                    'ค่าอื่นๆ'
                ],
                    itemHeight: 8,
                    itemWidth: 8
                },

                series: [{
                    name: 'ค่าใช้จ่าย',
                    type: 'pie',
                    radius: '70%',
                    center: ['50%', '50%'],
                    itemStyle: {
                        normal: {
                            borderWidth: 1,
                            borderColor: '#fff'
                        }
                    },
                    data: [
                        {value: {{$seed}}, name: 'เมล็ด'},
                        {value: {{$fertilizer}}, name: 'ปุ๋ย'},
                        {value: {{$wage}}, name: 'ค่าแรง'},
                        {value: {{$etc}}, name: 'ค่าอื่นๆ'}
                    ]
                }]
            });
        }
    </script> -->
    <script>
        $(window).on("load", function() {
            $(".loader-wrapper").fadeOut("slow");
        });

        document.getElementById('datePicker_start_plant').valueAsDate = new Date();
        document.getElementById('datePicker_show_temp').valueAsDate = new Date();
        document.getElementById('datePicker_show_humid').valueAsDate = new Date();

    </script>
    <script>
        setTimeout(function() {
            $('#alert').alert('close');
            $('#alert-mobile').alert('close');
        }, 3000);
    </script>
    @yield('scripts')
</body>

</html>